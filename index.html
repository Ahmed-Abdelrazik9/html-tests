<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Obstetrics Topics</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      min-height: 100vh;
      background: linear-gradient(
        120deg,
        rgba(20, 35, 84, 0.6) 0%,    /* 30% darker */
        rgba(32, 98, 184, 0.6) 45%,  /* 30% darker */
        rgba(123, 31, 162, 0.6) 100% /* 30% darker */
      );
      background-blend-mode: darken;
    }

    .module-card {
      transition: all 0.2s ease;
      background-color: #e8e1dd; /* 10% darker */
      border: 1px solid #c4beb9; /* 10% darker border */
    }

    .summary-circle {
      width: 18px;
      height: 18px;
      border: 2px solid #7c3aed;
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.2s ease;
      margin-left: 0.75rem;
      position: relative;
    }

    .summary-circle.checked::after {
      content: "âœ“";
      font-size: 12px;
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      color: #7c3aed;
    }

    .summary-circle.double-checked {
      border-color: #ef4444;
      background-color: rgba(239, 68, 68, 0.1);
    }

    /* Previous custom styles remain unchanged */
  </style>
</head>
<body class="text-gray-800 min-h-screen p-4">
  <!-- Existing HTML structure remains unchanged -->

  <script>
    // Add to setupCheckbox function
    function setupCheckbox(checkbox) {
      const labelText = checkbox.parentElement.textContent.trim();
      const moduleNumber = checkbox.closest('.module-card').querySelector('.module-number').textContent;
      const checkboxID = `module-${moduleNumber}-${labelText.replace(/\s+/g, '_').toLowerCase()}`;
      checkbox.dataset.id = checkboxID;

      // Create summary circle
      const circle = document.createElement('div');
      circle.className = `summary-circle ${localStorage.getItem(checkboxID+'_summary') ? 'checked' : ''}`;
      checkbox.parentElement.appendChild(circle);

      // Click handler
      circle.addEventListener('click', (e) => {
        if (![circle.classList.contains]('checked')) {
          circle.classList.add('checked');
          localStorage.setItem(checkboxID+'_summary', 'approved');
        }
      });

      // Double-click handler
      circle.addEventListener('dblclick', (e) => {
        if(confirm('Delete existing summary and generate new one?')) {
          circle.classList.remove('checked', 'double-checked');
          localStorage.removeItem(checkboxID+'_summary');
          // Add DeepSeek API call here
        } else {
          circle.classList.add('double-checked');
        }
      });

      // Existing checkbox functionality
      if (localStorage.getItem(checkboxID) === 'true') {
        checkbox.checked = true;
      }

      checkbox.addEventListener('change', () => {
        localStorage.setItem(checkboxID, checkbox.checked);
      });
    }

    // Rest of existing JavaScript remains unchanged
  </script>
</body>
</html>
