<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OSCE MRCPI</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --main-purple: #7b1fa2;
    }
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(120deg, #142354 0%, #2062b8 45%, #7b1fa2 100%);
      min-height: 100vh;
      margin: 0;
      overflow: hidden;
    }
    .custom-scroll::-webkit-scrollbar {
      width: 7px;
      background: #e1e6ef;
      border-radius: 4px;
    }
    .custom-scroll::-webkit-scrollbar-thumb {
      background: #2062b8;
      border-radius: 4px;
    }
    .divider {
      width: 2px;
      background: linear-gradient(180deg, #c7d2fe 10%, #7b1fa2 90%);
      min-height: 80%;
      margin: 0 10px;
      border-radius: 1px;
    }
    .osce-box {
      width: 100%;
      min-height: 56px;
      border-radius: 14px;
      background: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-family: 'Poppins', sans-serif;
      font-weight: 600;
      font-size: 1.23em;
      color: var(--main-purple);
      box-shadow: 0 4px 14px 0 rgba(32,98,184,0.10);
      letter-spacing: 0.5px;
      border: none;
      outline: none;
      transition: box-shadow .17s;
    }
    .osce-box span {
      font-weight: 400;
      font-size: 0.95em;
      color: var(--main-purple);
      opacity: 0.8;
      letter-spacing: 0.4px;
    }
    .boxes-gap {
      display: flex;
      flex-direction: column;
      gap: 28px; /* موحدة بين جميع البوكسات */
      width: 100%;
      align-items: center;
    }
    .timer-panel {
      width: 100%;
      height: 56px;
      background: linear-gradient(90deg, #e0eafc 0%, #cfdef3 100%);
      border-radius: 14px;
      box-shadow: 0 4px 14px 0 rgba(32,98,184,0.10);
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }
    .timer-content {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      gap: 18px;
    }
    .timer-time {
      font-size: 1.7rem;
      color: var(--main-purple);
      font-weight: 700;
      letter-spacing: 1.5px;
      text-align: center;
      min-width: 78px;
      font-family: 'Poppins', sans-serif;
      margin-right: 6px;
    }
    .timer-btn-ico {
      background: transparent;
      border: none;
      font-size: 1.5em;
      color: var(--main-purple);
      cursor: pointer;
      padding: 3px 9px;
      border-radius: 7px;
      transition: background 0.15s;
      font-family: 'Poppins', sans-serif;
    }
    .timer-btn-ico:hover {
      background: #f6e1fa;
    }
    .feedback-btn {
      background: #ffe0fa;
      border-radius: 14px;
      border: none;
      font-weight: 600;
      color: var(--main-purple);
      font-size: 1.23em;
      padding: 11px 0 10px 0;
      width: 100%;
      box-shadow: 0 4px 14px 0 rgba(32,98,184,0.10);
      cursor: pointer;
      letter-spacing: 0.4px;
      transition: background 0.14s;
      font-family: 'Poppins', sans-serif;
    }
    .feedback-btn:hover { background: #f8f0ff; }
    .modal {
      display: none;
      position: fixed;
      z-index: 100;
      left: 0; top: 0; width: 100vw; height: 100vh;
      background: rgba(32,34,54,0.4);
      align-items: center;
      justify-content: center;
    }
    .modal-content {
      background: #fff;
      border-radius: 18px;
      max-width: 410px;
      padding: 36px 30px 30px 30px;
      box-shadow: 0 8px 36px 0 rgba(32,98,184,0.16);
      text-align: left;
      position: relative;
      font-family: 'Poppins', sans-serif;
    }
    .close-modal {
      position: absolute;
      top: 20px; right: 34px;
      color: #2062b8;
      font-size: 2em;
      background: none;
      border: none;
      cursor: pointer;
      font-weight: bold;
    }
    .result-status {
      text-align: center;
      font-size: 2em;
      font-weight: bold;
      margin-bottom: 16px;
      color: #b82031;
      font-family: 'Poppins', sans-serif;
    }
    .result-status.pass {
      color: #20b86a;
    }
    @media (max-width: 900px) {
      .main-flex { flex-direction: column !important; }
      .divider { display: none; }
      .left-panel { max-width: 100%; margin-bottom: 18px;}
      .summary-scroll { max-height: 320px; }
      .center-vert { justify-content: flex-start !important; }
      .osce-box, .timer-panel, .feedback-btn { min-height: 48px; font-size: 1em; }
      .timer-time { font-size: 1.1em; min-width: 58px;}
    }
  </style>
</head>
<body>
  <div class="flex flex-row h-screen main-flex">
    <!-- Left Panel -->
    <div class="left-panel flex flex-col w-1/3 max-w-xs min-w-[290px] px-4 pt-4 pb-4 center-vert justify-center">
      <div class="flex flex-col items-center mb-8">
        <h2 class="text-3xl font-bold text-white tracking-wide drop-shadow mb-2" style="line-height:1.1; letter-spacing:1px;">OSCE MRCPI</h2>
      </div>
      <!-- جميع البوكسات في قائمة بفواصل متساوية -->
      <div class="boxes-gap">
        <div class="osce-box">
          Structured Discussion
          <span>(SD)</span>
        </div>
        <div class="osce-box">
          Role Player
          <span>(SPT)</span>
        </div>
        <!-- Timer Box بنسخة Study MRCPI معدلة -->
        <div class="timer-panel">
          <div class="timer-content">
            <div id="timer" class="timer-time">10:00</div>
            <button class="timer-btn-ico" id="startBtn" title="Start">&#9654;</button>
            <button class="timer-btn-ico" id="pauseBtn" title="Pause">&#10073;&#10073;</button>
          </div>
        </div>
        <!-- Feedback Button -->
        <button class="feedback-btn" id="feedbackBtn">Feedback</button>
      </div>
    </div>
    <!-- فاصل رأسي رفيع -->
    <div class="divider self-center"></div>
    <!-- Right Panel (Content) -->
    <div class="flex-1 flex flex-col justify-start h-full py-10 px-8 overflow-hidden">
      <!-- عنوان السيناريو Centralized -->
      <div class="mb-4 flex items-center justify-center" style="height:54px;">
        <h3 
          class="text-3xl font-bold mb-2 text-center"
          style="color:#d7e9fc; letter-spacing:0.5px;">
          Abdominal Pain in Pregnancy
        </h3>
      </div>
      <!-- سيناريو OSCE (Scrollable) -->
      <div class="bg-white/90 rounded-xl shadow-lg p-6 custom-scroll overflow-y-auto" style="height: calc(100vh - 170px); max-height: 620px;">
        <p>
          <b>Scenario:</b><br>
          You are the registrar in an antenatal clinic.<br>
          A 32-year-old woman, 20 weeks pregnant, presents with acute abdominal pain.<br>
          <br>
          <b>Task:</b><br>
          - Take a focused history<br>
          - Address the patient’s concerns<br>
          - Outline your initial management plan
        </p>
        <div style="height:140px;"></div>
      </div>
    </div>
  </div>
  <!-- Feedback Modal -->
  <div class="modal" id="modalFeedback">
    <div class="modal-content relative">
      <button class="close-modal" id="closeModal">&times;</button>
      <div id="breakdownResult">
        <div class="result-status">Fail</div>
        <ul style="margin-left: 18px;">
          <li>Information Gathering: 3/8</li>
          <li>Communication: 2/5</li>
          <li>Management Plan: 1/4</li>
        </ul>
        <p class="mt-4 font-semibold" style="color:#b82031;">Reason for Fail: Missed key information and red flags.</p>
      </div>
    </div>
  </div>
  <script>
    // Timer Logic: stopwatch countdown from 10:00 to 0:00
    let timer = 600; // 10 minutes in seconds
    let interval = null;
    const timerEl = document.getElementById('timer');
    const startBtn = document.getElementById('startBtn');
    const pauseBtn = document.getElementById('pauseBtn');
    const feedbackBtn = document.getElementById('feedbackBtn');
    const modal = document.getElementById('modalFeedback');
    const closeModal = document.getElementById('closeModal');

    function updateTimer() {
      let min = String(Math.floor(timer/60)).padStart(2, '0');
      let sec = String(timer%60).padStart(2, '0');
      timerEl.textContent = `${min}:${sec}`;
    }
    updateTimer();

    startBtn.onclick = function() {
      if (interval) return;
      interval = setInterval(()=>{
        if (timer > 0) {
          timer--;
          updateTimer();
        }
      }, 1000);
    };
    pauseBtn.onclick = function() {
      clearInterval(interval);
      interval = null;
    };
    feedbackBtn.onclick = function() {
      modal.style.display = "flex";
    };
    closeModal.onclick = function() {
      modal.style.display = "none";
    };
    window.onload = ()=>{
      modal.style.display = "none";
      timer = 600; updateTimer();
      clearInterval(interval);
      interval = null;
    };
  </script>
</body>
</html>
