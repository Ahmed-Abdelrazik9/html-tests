<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CarePro OSCE - Summarization</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      min-height: 100vh;
      background: linear-gradient(120deg, #142354 0%, #2062b8 45%, #7b1fa2 100%);
      position: relative;
    }
    .line-art {
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      z-index: 1;
      pointer-events: none;
      opacity: 0.10;
      background: url('data:image/svg+xml;utf8,<svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg"><path d="M0,90 Q120,120 340,60 Q600,0 800,180 Q900,270 1200,180" stroke="white" stroke-width="2" fill="none"/><circle cx="650" cy="200" r="80" stroke="white" stroke-width="1" fill="none"/></svg>') no-repeat center/cover;
    }
    .summary-card {
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .summary-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 24px 0 rgba(16, 98, 200, 0.18);
    }
    .tab-button {
      transition: all 0.2s;
    }
    .tab-button.active {
      background-color: white;
      color: #2062b8;
      font-weight: 600;
    }
    .tab-content {
      display: none;
    }
    .tab-content.active {
      display: block;
    }
    .loading-dots span {
      animation: loadingDots 1.4s infinite ease-in-out both;
    }
    .loading-dots span:nth-child(1) { animation-delay: -0.32s; }
    .loading-dots span:nth-child(2) { animation-delay: -0.16s; }
    @keyframes loadingDots {
      0%, 80%, 100% { transform: scale(0); }
      40% { transform: scale(1); }
    }
    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 12px 20px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      z-index: 100;
      transform: translateY(100px);
      opacity: 0;
      transition: transform 0.3s, opacity 0.3s;
    }
    .toast.show {
      transform: translateY(0);
      opacity: 1;
    }
  </style>
</head>
<body>
  <!-- RCOG line art style overlay -->
  <div class="line-art"></div>

  <div class="relative z-10 flex flex-col items-center min-h-screen p-4 md:p-8">
    <!-- Header with Back Button -->
    <div class="w-full max-w-4xl flex items-center mb-6">
      <a href="search.html" class="flex items-center text-white hover:text-blue-200 transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
        </svg>
        <span>Back to Search</span>
      </a>
    </div>

    <!-- Summarization Container -->
    <div class="w-full max-w-4xl">
      <!-- Selected Topics Section -->
      <div class="bg-white/90 backdrop-blur-md rounded-2xl p-6 shadow-xl mb-6">
        <h2 class="text-2xl font-bold text-[#2062b8] mb-4">Selected Topics</h2>
        
        <div id="selectedTopicsContainer" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <!-- Selected topics will be populated here by JavaScript -->
          <div class="flex justify-center items-center col-span-2 py-4">
            <p class="text-gray-500">Loading selected topics...</p>
          </div>
        </div>
        
        <!-- Generate Button -->
        <div class="flex justify-center">
          <button id="generateBtn" class="px-6 py-3 bg-[#2062b8] text-white font-medium rounded-xl hover:bg-[#1a4c8f] transition-colors">
            Generate Summary
          </button>
        </div>
      </div>
      
      <![-- Summary Results Section ](initially hidden) -->
      <div id="summaryResults" class="bg-white/90 backdrop-blur-md rounded-2xl p-6 shadow-xl mb-6 hidden">
        <h2 id="summaryTitle" class="text-2xl font-bold text-[#2062b8] mb-4">Summary</h2>
        
        <![-- Loading State ](initially shown when generating) -->
        <div id="loadingState" class="py-8 flex flex-col items-center">
          <div class="loading-dots flex space-x-2 mb-4">
            <span class="w-3 h-3 bg-[#2062b8] rounded-full"></span>
            <span class="w-3 h-3 bg-[#2062b8] rounded-full"></span>
            <span class="w-3 h-3 bg-[#2062b8] rounded-full"></span>
          </div>
          <p class="text-gray-600">Generating comprehensive summary...</p>
        </div>
        
        <!-- Tabs Navigation -->
        <div id="summaryTabs" class="hidden">
          <div class="flex border-b border-gray-200 mb-4 overflow-x-auto">
            <button class="tab-button active px-4 py-2 rounded-t-lg whitespace-nowrap" data-tab="overview">Overview</button>
            <button class="tab-button px-4 py-2 rounded-t-lg whitespace-nowrap" data-tab="diagnosis">Diagnosis</button>
            <button class="tab-button px-4 py-2 rounded-t-lg whitespace-nowrap" data-tab="management">Management</button>
            <button class="tab-button px-4 py-2 rounded-t-lg whitespace-nowrap" data-tab="complications">Complications</button>
          </div>
          
          <!-- Tab Contents -->
          <div class="tab-content active" id="overview-tab">
            <h3 class="text-lg font-semibold text-[#2062b8] mb-2">Overview</h3>
            <div class="prose max-w-none">
              <p class="mb-3">Preeclampsia is a pregnancy-specific hypertensive disorder with multisystem involvement. It typically occurs after 20 weeks of gestation and can lead to serious maternal and fetal complications if not properly managed.</p>
              
              <p class="mb-3">The condition is characterized by:</p>
              <ul class="list-disc pl-5 mb-3">
                <li>New-onset hypertension (systolic BP ≥140 mmHg or diastolic BP ≥90 mmHg)</li>
                <li>Proteinuria (≥300 mg in 24 hours or protein/creatinine ratio ≥0.3)</li>
                <li>Or end-organ dysfunction in the absence of proteinuria</li>
              </ul>
              
              <p class="mb-3">The global prevalence of preeclampsia is estimated at 2-8% of all pregnancies, with higher rates in developing countries. Risk factors include nulliparity, previous history of preeclampsia, chronic hypertension, multiple gestation, and pre-existing medical conditions such as diabetes mellitus, renal disease, and autoimmune disorders.</p>
              
              <p>The pathophysiology involves abnormal placentation leading to placental ischemia, which triggers the release of anti-angiogenic factors. These factors cause widespread endothelial dysfunction, resulting in the clinical manifestations of preeclampsia.</p>
            </div>
          </div>
          
          <div class="tab-content" id="diagnosis-tab">
            <h3 class="text-lg font-semibold text-[#2062b8] mb-2">Diagnosis</h3>
            <div class="prose max-w-none">
              <p class="mb-3">Diagnosis of preeclampsia is based on the presence of hypertension after 20 weeks of gestation along with one or more of the following:</p>
              
              <ul class="list-disc pl-5 mb-3">
                <li>Proteinuria (≥300 mg in 24 hours or protein/creatinine ratio ≥0.3)</li>
                <li>Thrombocytopenia (platelet count <100,000/μL)</li>
                <li>Renal insufficiency (serum creatinine >1.1 mg/dL or doubling of baseline)</li>
                <li>Impaired liver function (elevated transaminases to twice the upper limit of normal)</li>
                <li>Pulmonary edema</li>
                <li>Cerebral or visual symptoms</li>
              </ul>
              
              <p class="mb-3">Severe features of preeclampsia include:</p>
              <ul class="list-disc pl-5 mb-3">
                <li>Systolic BP ≥160 mmHg or diastolic BP ≥110 mmHg on two occasions at least 4 hours apart</li>
                <li>Thrombocytopenia (platelet count <100,000/μL)</li>
                <li>Impaired liver function (elevated transaminases to twice the upper limit of normal, severe right upper quadrant or epigastric pain)</li>
                <li>Progressive renal insufficiency</li>
                <li>Pul
